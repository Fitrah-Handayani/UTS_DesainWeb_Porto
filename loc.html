<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- --------- UNICONS ---------- -->
  <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css" />

  <!-- --------- CSS ---------- -->
  <link rel="stylesheet" href="assets/css/style.css" />

  <!-- --------- FAVICON ---------- -->
  <link rel="shortcut icon" href="assets/images/favicon.png" type="image/x-icon" />

  <title>Tutorial</title>

  <style>
    /* Gaya untuk tombol Run dan Undo */
    .run-button, .undo-button {
      background-color: #9EB384;
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 25px;
      font-size: 16px;
      cursor: pointer;
      width: 100px;
      height: 50px;
      transition: background-color 0.3s ease;
      text-align: center;
    }

    .run-button:hover, .undo-button:hover {
      background-color: #7E9D6A;
    }

    /* Button Style */
    .back-button {
      display: inline-block;
      background-color: #9EB384;
      border: none;
      padding: 10px 20px;
      border-radius: 10px;
      cursor: pointer;
      color: #fff;
      font-size: 16px;
      transition: background-color 0.3s ease;
      position: fixed;
      top: 50px;
      right: 135px;
      z-index: 1100;
      text-align: center;
      text-decoration: none;
    }

    /* Hover Effect */
    .back-button:hover {
      background-color: #7E9D6A;
    }
  </style>
</head>

<body>
  <div class="container">
    <nav id="header">
      <div class="nav-logo">
        <p class="nav-name">Loc</p>
        <span>.</span>
      </div>
    </nav>

    <button class="button-getLocation" onclick="getLocation()">Get Location</button>

    <!-- Tombol Kembali ke halaman sebelumnya (tutorial) -->
    <a href="tutorial.html" class="back-button">Back</a>

    <main class="wrapper">
      <section class="section" id="tutorials">
        <div class="top-header">
          <h1>Tutorial: CSS Basics</h1>
        </div>

        <!-- Tutorial: Inline CSS -->
        <div class="tutorial-box">
          <h2>Membuat loc</h2>
          <p>
            HTML5 Geolocation API memungkinkan situs web atau aplikasi untuk meminta data lokasi pengguna, seperti koordinat lintang dan bujur, melalui JavaScript. API ini sering digunakan pada aplikasi berbasis lokasi untuk memberikan layanan atau informasi yang relevan berdasarkan posisi pengguna, seperti menampilkan peta atau menemukan tempat terdekat.
          </p>
          <h3>Code HTML & CSS:</h3>
          <textarea class="editor" rows="3" id="inlineCode" placeholder="">
            <!DOCTYPE html>
            <html lang="en">
              <head>
                <meta charset="UTF-8" />
                <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                <title>Geolocation API</title>
                <style>
                  /* Container for content */
                  .container_loc {
                    text-align: center;
                    border-radius: 15px;
                    padding: 40px;
                    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
                    background-color: #CEDEBD;
                  }

                  h1 {
                    font-size: 24px;
                    color: #333;
                    margin-bottom: 20px;
                  }

                  /* Stylish button */
                  button {
                    background-color: #9EB384;
                    color: #fff;
                    border: none;
                    padding: 15px 30px;
                    border-radius: 25px;
                    font-size: 16px;
                    cursor: pointer;
                    transition: background-color 0.3s ease;
                  }

                  button:hover {
                    background-color: #435334;
                  }

                  /* Location result box */
                  #location {
                    margin-top: 20px;
                    padding: 20px;
                    border-radius: 15px;
                    background-color: #FAF1E4;
                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
                    display: none;
                  }

                  h3 {
                    margin-bottom: 10px;
                    font-size: 20px;
                    color: #435334;
                  }

                  p {
                    font-size: 16px;
                    color: #8c8c8c;
                    margin: 5px 0;
                  }
                </style>
              </head>
              <body>
                <div class="container_loc">
                  <h1>Get User Location with Geolocation API</h1>
                  <button onclick="getLocation()">Get Location</button>

                  <div id="location">
                    <h3>Your Location:</h3>
                    <p>Latitude: <span id="latitude"></span></p>
                    <p>Longitude: <span id="longitude"></span></p>
                    <p>Accuracy: <span id="accuracy"></span> meters</p>
                  </div>
                </div>
              </body>
            </html>
          </textarea>
          <button class="run-button" onclick="runInlineCode()">Run</button>
          <button class="undo-button" onclick="undoInlineCode()">Undo</button>
          <h3>Hasil:</h3>
          <div class="preview" id="previewInline"></div>
        </div>
      </section>
    </main>

    <!-- ----- MAIN JS ----- -->
    <script src="assets/js/main.js"></script>
    <script>
      let inlineCodeHistory = [];
      let selectorCodeHistory = [];
      let marginsCodeHistory = [];

      function runInlineCode() {
        const code = document.getElementById("inlineCode").value;
        document.getElementById("previewInline").innerHTML = code;
        inlineCodeHistory.push(code);
      }

      function undoInlineCode() {
        if (inlineCodeHistory.length > 1) {
          inlineCodeHistory.pop(); // Remove the last entry
          const previousCode = inlineCodeHistory[inlineCodeHistory.length - 1];
          document.getElementById("inlineCode").value = previousCode;
          document.getElementById("previewInline").innerHTML = previousCode; // Update preview
        } else {
          document.getElementById("previewInline").innerHTML = ""; // Clear if no history left
        }
      }
      function runSelectorCode() {
      const code = document.getElementById("selectorCode").value;
      const style = document.createElement("style");
      style.innerHTML = code;

      // Clear previous styles
      const preview = document.getElementById("previewSelector");
      if (preview.querySelector("style"))
        preview.querySelector("style").remove();

      preview.appendChild(style);
      selectorCodeHistory.push(code);
    }

    function undoSelectorCode() {
      if (selectorCodeHistory.length > 1) {
        selectorCodeHistory.pop(); // Remove the last entry
        const previousCode =
          selectorCodeHistory[selectorCodeHistory.length - 1];
        document.getElementById("selectorCode").value = previousCode;

        const preview = document.getElementById("previewSelector");
        preview.querySelector("style").innerHTML = previousCode; // Update preview
      } else {
        const preview = document.getElementById("previewSelector");
        if (preview.querySelector("style"))
          preview.querySelector("style").remove(); // Clear if no history left
      }
    }

    function runMarginsCode() {
      const code = document.getElementById("marginsCode").value;
      const style = document.createElement("style");
      style.innerHTML = code;

      // Clear previous styles
      const preview = document.getElementById("previewMargins");
      if (preview.querySelector("style"))
        preview.querySelector("style").remove();

      preview.appendChild(style);
      marginsCodeHistory.push(code);
    }

    function undoMarginsCode() {
      if (marginsCodeHistory.length > 1) {
        marginsCodeHistory.pop(); // Remove the last entry
        const previousCode =
          marginsCodeHistory[marginsCodeHistory.length - 1];
        document.getElementById("marginsCode").value = previousCode;

        const preview = document.getElementById("previewMargins");
        preview.querySelector("style").innerHTML = previousCode; // Update preview
      } else {
        const preview = document.getElementById("previewMargins");
        if (preview.querySelector("style"))
          preview.querySelector("style").remove(); // Clear if no history left
      }
    }
  </script>

<script>
  // Function to get user location
  function getLocation() {
    const locationBox = document.getElementById("location");
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(showPosition, showError);
    } else {
      alert("Geolocation is not supported by this browser.");
    }

    // Add loading effect to the button
    const button = document.querySelector("button");
    button.innerHTML = "Getting Location...";
    button.disabled = true;
    button.style.backgroundColor = "#ccc";
  }

  // Function to display position
  function showPosition(position) {
    document.getElementById("latitude").innerHTML =
      position.coords.latitude;
    document.getElementById("longitude").innerHTML =
      position.coords.longitude;
    document.getElementById("accuracy").innerHTML =
      position.coords.accuracy + " meters";

    // Show the location div
    const locationBox = document.getElementById("location");
    locationBox.style.display = "block";

    // Revert button state
    const button = document.querySelector(".button-getLocation");
    button.innerHTML = "Get Location";
    button.disabled = false;
    button.style.backgroundColor = "#007bff";
  }

  // Function to handle errors
  function showError(error) {
    switch (error.code) {
      case error.PERMISSION_DENIED:
        alert("User denied the request for Geolocation.");
        break;
      case error.POSITION_UNAVAILABLE:
        alert("Location information is unavailable.");
        break;
      case error.TIMEOUT:
        alert("The request to get user location timed out.");
        break;
      case error.UNKNOWN_ERROR:
        alert("An unknown error occurred.");
        break;
    }

    // Revert button state even in case of an error
    const button = document.querySelector(".button-getLocation");
    button.innerHTML = "Get Location";
    button.disabled = false;
    button.style.backgroundColor = "#007bff";
  }
</script>




</body>

</html>
